<!DOCTYPE html>
<!--
    This page demonstrates the usage of a popup-style toolbar. Along with the
    standard 'save' and 'edit' actions, this page demonstrates a colorpicker
    action which allows the user to click on a drawn feature and change its
    color.
-->
<html>
<head>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.6.0/leaflet.css">
	<link rel="stylesheet" type="text/css" href="./leaflet-draw/leaflet.draw.css" />
	<link rel="stylesheet" type="text/css" href="./leaflet-toolbar/leaflet.toolbar.css" />
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css"/>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css"/>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/>	
    <link rel="stylesheet" href="leaflet.draw-toolbar.css"/>
	<script src="https://code.jquery.com/jquery-1.10.1.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.6.0/leaflet.js"></script>
	<script src="./leaflet-toolbar/leaflet.toolbar-src.js"></script>
	<script src="./leaflet-draw/leaflet.draw-src.js"></script>
    <script src="leaflet.draw-toolbar.js"></script>
	 <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-editable/1.1.0/Leaflet.Editable.js"></script>
	 <script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.js"></script>
	 <script src="leaflet.browser.print.min.js" ></script>
	<script src="ColorPicker.js"></script>
	<script src="tokml.js"></script>
	<style>
		body {
            margin: 0;
            padding: 0;
        }
        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
        }
		 #delete, #export {
            position: absolute;
            top:50px;
            right:10px;
            z-index:1000;
            background:white;
            color:black;
            padding:6px;
            border-radius:4px;
            font-family: 'Helvetica Neue';
            cursor: pointer;
            font-size:12px;
            text-decoration:none;
        }
        #export {
            top:90px;
        }
	</style>	
</head>
<body>
	<div id="map"></div>
	<div id="delete">Delete Features</div>
	<a href='#' id='export'>Export Features</a>
	<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>
	<style>
		.leaflet-toolbar-icon .fa { color: #000; }
		.leaflet-color-swatch { background-color: #fff; }
	</style>	
	<script>
		var jsonData = {"type":"MultiPolygon","coordinates":[[[[74.8805241370001,22.0313112700001],[74.8805904480001,22.031288267],[74.8806292830001,22.0312782130001],[74.8807489430001,22.0312511500001],[74.880925985,22.0311928880001],[74.8811655210001,22.0311720770001],[74.881378397,22.031174965],[74.881632719,22.0311591610001],[74.881969295,22.0311147090001],[74.882127987,22.031086993],[74.8824480850001,22.0310638],[74.882756751,22.031073862],[74.883081012,22.031094163],[74.8831536180001,22.0310877840001],[74.883285157,22.031116825],[74.8834421440001,22.0311742100001],[74.8835494310001,22.031243137],[74.883615143,22.031051958],[74.8836564580001,22.0306240080001],[74.8836604910001,22.0305822400001],[74.8836715250001,22.0304712720001],[74.8836915370001,22.0302700300001],[74.8836818120001,22.0302570700001],[74.8835350480001,22.030061486],[74.883352937,22.029914397],[74.882936611,22.029655962],[74.8825536510001,22.0294073580001],[74.882344415,22.0292182370001],[74.882113492,22.02891666],[74.8819256410001,22.0285340290001],[74.8818480350001,22.0282280230001],[74.8818300710001,22.0280832220001],[74.881811257,22.0279315670001],[74.881850596,22.027750101],[74.8819463130001,22.027641981],[74.8823574610001,22.027548821],[74.8828113310001,22.0273314890001],[74.882901561,22.0272209140001],[74.88291473,22.027095189],[74.8828442280001,22.027039835],[74.882696713,22.026924014],[74.8824197260001,22.0266633860001],[74.8823218260001,22.0264963590001],[74.88232005,22.0264237870001],[74.882317432,22.0263168050001],[74.8823714210001,22.026068975],[74.8825474590001,22.025713868],[74.8825543500001,22.0255445010001],[74.8825404940001,22.0255322680001],[74.882409265,22.025416405],[74.8818024380001,22.0250450410001],[74.8816456960001,22.024855702],[74.881371104,22.0242714820001],[74.88136088,22.024239363],[74.8812179280001,22.0237902430001],[74.881154999,22.0231089760001],[74.881176129,22.0219958170001],[74.881207762,22.02146665],[74.881253262,22.0212793470001],[74.881265001,22.020994219],[74.8810590050001,22.0208772080001],[74.8808259780001,22.0209275060001],[74.880806244,22.02092423],[74.880701919,22.0209121390001],[74.8806102620001,22.0209113550001],[74.880508676,22.0209164610001],[74.8803022720001,22.0209135270001],[74.8802223610001,22.0209144360001],[74.8801152790001,22.020923404],[74.8799977560001,22.0209150330001],[74.87990045,22.0209099590001],[74.879823193,22.020881058],[74.879756629,22.0208199790001],[74.879740122,22.0207934750001],[74.8797251570001,22.020739495],[74.8797207800001,22.0206983140001],[74.879729151,22.0205980800001],[74.8797359850001,22.0204990010001],[74.879751248,22.0204011160001],[74.8797571200001,22.0203024780001],[74.8797662000001,22.020233644],[74.8797929070001,22.0201679040001],[74.8798340060001,22.020133292],[74.879822636,22.0200129040001],[74.879831859,22.019961062],[74.8798394020001,22.0198855560001],[74.879840292,22.019879555],[74.8798471910001,22.019833078],[74.8798729310001,22.0197606940001],[74.879893957,22.0197082650001],[74.879924143,22.0196346220001],[74.8799476610001,22.0195505520001],[74.879976502,22.0194945580001],[74.8799801810001,22.0194874160001],[74.880008021,22.0194246820001],[74.8800291050001,22.019360772],[74.880040175,22.019290848],[74.88004047,22.0191753460001],[74.880014417,22.0190925140001],[74.8799853150001,22.0187533210001],[74.8799685270001,22.0185713700001],[74.8799567010001,22.0183971600001],[74.879914295,22.0182662770001],[74.8798398660001,22.018106297],[74.879682335,22.017827143],[74.8794919690001,22.0175435080001],[74.879325474,22.017324092],[74.8792465240001,22.017145231],[74.8791961970001,22.0167090090001],[74.8792844000001,22.016376114],[74.879364487,22.0161979540001],[74.879530173,22.015958101],[74.879681008,22.015851132],[74.8798371060001,22.0158235970001],[74.8800529490001,22.015768129],[74.8802155290001,22.0157187560001],[74.8802163570001,22.015687627],[74.8802208490001,22.0155558110001],[74.8801847020001,22.0151775320001],[74.8801926620001,22.014952351],[74.880247507,22.0146607340001],[74.8802657910001,22.0145012880001],[74.8802936450001,22.0141994530001],[74.8803213210001,22.014007684],[74.8803891060001,22.0137381910001],[74.8804602980001,22.01355693],[74.8805315320001,22.013413341],[74.8805338770001,22.0134040140001],[74.8806164590001,22.0131217970001],[74.880677405,22.0129587550001],[74.880711057,22.0128710810001],[74.880768076,22.0127182050001],[74.8808328700001,22.0125385380001],[74.880871229,22.012465865],[74.880891315,22.0124383990001],[74.8809429010001,22.0123833850001],[74.880993398,22.012345929],[74.8810302430001,22.012304898],[74.881121277,22.012178347],[74.8811631840001,22.0120965880001],[74.881250777,22.011935894],[74.8813143880001,22.011807284],[74.8813369860001,22.0117503180001],[74.881365992,22.011553341],[74.8813873270001,22.0112725720001],[74.8813709090001,22.0111060090001],[74.881369089,22.010808233],[74.881391073,22.0106312130001],[74.881414922,22.0105108560001],[74.881410665,22.0104464],[74.8814122040001,22.010347208],[74.8814170680001,22.0102752500001],[74.8814652130001,22.0100934330001],[74.881508329,22.009918822],[74.8815633120001,22.009627084],[74.881663684,22.0093628540001],[74.881721402,22.0092045660001],[74.8818368,22.0090167330001],[74.8818914890001,22.0088969720001],[74.8819240610001,22.008848245],[74.8819695890001,22.0087766190001],[74.882098495,22.008566306],[74.8821365640001,22.008502037],[74.8822717450001,22.0083173940001],[74.8823994430001,22.0081121690001],[74.8824618620001,22.0079999210001],[74.8825333510001,22.007913941],[74.8827862470001,22.007592656],[74.8828430930001,22.00753831],[74.882889086,22.007470187],[74.8829362260001,22.007415098],[74.883021114,22.007300829],[74.88307186,22.00722697],[74.8830911760001,22.007110669],[74.883091414,22.0071089320001],[74.883105652,22.006980464],[74.883077443,22.0069482160001],[74.8829848450001,22.006872135],[74.8828934780001,22.0067980960001],[74.8828284460001,22.0067326270001],[74.8827310350001,22.0066261310001],[74.882634631,22.0065074020001],[74.8825793070001,22.0064293300001],[74.882671099,22.006396813],[74.8827210300001,22.0063368790001],[74.8828121480001,22.0062645130001],[74.8829037140001,22.006191793],[74.8830662940001,22.006062673],[74.8832009590001,22.0059520390001],[74.8831859890001,22.005919776],[74.8831569640001,22.00587496],[74.8830739200001,22.005805133],[74.8828226740001,22.005584893],[74.8827085990001,22.0054852260001],[74.882636813,22.0054064550001],[74.882596059,22.005448126],[74.882544948,22.0054826800001],[74.882346286,22.005646611],[74.8821546730001,22.005804933],[74.8819891030001,22.005976693],[74.881863158,22.006130398],[74.8817022210001,22.006313559],[74.8816054160001,22.0064298520001],[74.8815112790001,22.0065303810001],[74.881361924,22.006697036],[74.881164986,22.006925236],[74.8809970730001,22.007121623],[74.880922244,22.0072167370001],[74.8806382240001,22.0071578320001],[74.8802115620001,22.0070446880001],[74.879771986,22.006924192],[74.8793708900001,22.0068190760001],[74.879186824,22.006768896],[74.878962443,22.0067122730001],[74.878637219,22.0066235250001],[74.878274026,22.006528175],[74.877966971,22.006453633],[74.877802676,22.0065183080001],[74.8774466390001,22.0066419030001],[74.8771395590001,22.0067549550001],[74.8768259380001,22.006860133],[74.876479374,22.006788882],[74.87619161,22.006730743],[74.8759935160001,22.0066844510001],[74.8757824780001,22.006647349],[74.8757150310001,22.006633466],[74.8756528900001,22.00662061],[74.8753107030001,22.0065517510001],[74.8751291400001,22.006672349],[74.8749959370001,22.0067611100001],[74.8747313910001,22.006968671],[74.874387525,22.007212586],[74.8740992040001,22.007410626],[74.873842956,22.0076027750001],[74.8737676200001,22.0076621270001],[74.873695323,22.007811138],[74.8736115340001,22.0079738060001],[74.8735559260001,22.008094681],[74.873464874,22.008241626],[74.8733623540001,22.008461104],[74.8731876860001,22.008814756],[74.8730134040001,22.009173553],[74.872832427,22.009533881],[74.8726467000001,22.009897161],[74.8724631590001,22.010267549],[74.872395247,22.010397816],[74.8723469710001,22.0105282490001],[74.8723050090001,22.010640494],[74.872194839,22.0108421370001],[74.8721503090001,22.010906855],[74.872050265,22.011052254],[74.871993699,22.011129195],[74.871898393,22.011237796],[74.8718324810001,22.011340365],[74.8717394320001,22.0114447510001],[74.871575287,22.0115290410001],[74.871508675,22.011511926],[74.8715090320001,22.0115162480001],[74.8713600090001,22.0113093260001],[74.8714133610001,22.011486995],[74.8715184900001,22.0115973280001],[74.871557475,22.011756169],[74.871609237,22.011919183],[74.871665266,22.0120317610001],[74.8716778890001,22.0121294250001],[74.8716785290001,22.0121326780001],[74.8716982130001,22.012397922],[74.871702096,22.0125120610001],[74.871703272,22.012546623],[74.871731927,22.012864974],[74.871737915,22.0129064440001],[74.871745661,22.0129600830001],[74.8717702230001,22.013101485],[74.8718166,22.0132411600001],[74.871842196,22.013280674],[74.8720651580001,22.013321832],[74.872512756,22.01331915],[74.8726398140001,22.013332759],[74.8726932710001,22.013355238],[74.8728524050001,22.013454214],[74.872930513,22.013526637],[74.872930818,22.013527192],[74.872959472,22.01357942],[74.8729925100001,22.0136693800001],[74.873009693,22.0137799400001],[74.8730123540001,22.0140141320001],[74.873005101,22.0141167400001],[74.8729924840001,22.014170484],[74.872975491,22.014242864],[74.8729960810001,22.01430544],[74.8730646930001,22.0143535660001],[74.8731588800001,22.014391211],[74.873337985,22.014414544],[74.873592672,22.014390136],[74.873856044,22.0143585230001],[74.8741105570001,22.0143277350001],[74.8742595620001,22.01431088],[74.8743753540001,22.01430221],[74.8745548380001,22.0142924460001],[74.8745720520001,22.0143300560001],[74.874574722,22.014357272],[74.8745629160001,22.0144211780001],[74.874562128,22.014425955],[74.8744862930001,22.0145903100001],[74.874425043,22.014648607],[74.874367669,22.0146959850001],[74.8742797040001,22.0147450700001],[74.874110672,22.014821651],[74.873852615,22.014933355],[74.8736002470001,22.0150113510001],[74.8735385950001,22.015024339],[74.87344698,22.0150410580001],[74.873371364,22.0150606650001],[74.8733268670001,22.015090107],[74.8733022600001,22.0151542950001],[74.8732993090001,22.0152519320001],[74.873302128,22.0152965250001],[74.8733120570001,22.0153878],[74.8733394430001,22.015578057],[74.8733610300001,22.0156648490001],[74.8733753240001,22.015761255],[74.873389741,22.015808868],[74.87339015,22.0158362970001],[74.8733633210001,22.015876699],[74.8733329770001,22.0158952560001],[74.8732820760001,22.0159267810001],[74.873235789,22.0159414130001],[74.873206103,22.015973011],[74.8731573100001,22.015995538],[74.8730110230001,22.0160807290001],[74.8729369590001,22.0161318250001],[74.8728080210001,22.016236432],[74.872746953,22.0162978110001],[74.8727246710001,22.01632856],[74.872713511,22.0163627910001],[74.8726766330001,22.016448891],[74.8726693560001,22.0166089850001],[74.872661469,22.016671902],[74.8726839590001,22.016737936],[74.8727821030001,22.016902767],[74.872878599,22.0170284390001],[74.8729691560001,22.017127245],[74.8730425460001,22.017210178],[74.873062363,22.0172435490001],[74.873036127,22.0173674230001],[74.872952796,22.017468079],[74.8728163690001,22.017530578],[74.8726828370001,22.0175745180001],[74.8724667130001,22.017633286],[74.8722398360001,22.017686176],[74.871998977,22.0177260500001],[74.8717488920001,22.017772269],[74.871612102,22.0177986370001],[74.871477139,22.0178504460001],[74.8714446130001,22.0178783490001],[74.871429666,22.017939541],[74.8714352540001,22.017991399],[74.871435632,22.01805776],[74.8714341070001,22.018229923],[74.8714381830001,22.0183420400001],[74.8714305560001,22.0183808900001],[74.871382516,22.018408627],[74.8713416850001,22.0184150060001],[74.87123101,22.018397695],[74.871093595,22.0183666820001],[74.8709733690001,22.0183247690001],[74.8708949080001,22.0182986180001],[74.8708248730001,22.0182833040001],[74.8707961600001,22.0182851870001],[74.870674325,22.0183669480001],[74.8705901750001,22.018425934],[74.870435113,22.0185849960001],[74.8702267200001,22.0188268420001],[74.8701276210001,22.018957571],[74.8700498810001,22.0191009970001],[74.869983743,22.019202724],[74.8699532510001,22.0192791600001],[74.8699298770001,22.01937795],[74.8699506,22.0194360180001],[74.8700034650001,22.0194727580001],[74.8700632000001,22.019518722],[74.8700888160001,22.0195399680001],[74.8701435930001,22.0196702280001],[74.8701483580001,22.0196840090001],[74.8701426050001,22.0196954890001],[74.870098054,22.019736333],[74.870014961,22.019787421],[74.8699374270001,22.019814449],[74.869893985,22.0198705650001],[74.8698357820001,22.0199212900001],[74.869821733,22.0199667530001],[74.8698093630001,22.020016534],[74.8697875240001,22.020069672],[74.869768466,22.020105916],[74.8697300900001,22.0201858140001],[74.8697205920001,22.020229085],[74.8697226640001,22.020255358],[74.8697041680001,22.020347885],[74.869685179,22.020424807],[74.8696650810001,22.0204943530001],[74.8696724210001,22.02055096],[74.8694925450001,22.02139885],[74.8693656740001,22.021515084],[74.8692503090001,22.021524395],[74.8689966050001,22.0214303970001],[74.8688506070001,22.021430848],[74.8687569670001,22.0215660750001],[74.8686814380001,22.0218759570001],[74.8686613020001,22.022202018],[74.8686661070001,22.0228102520001],[74.868539179,22.022989513],[74.868340183,22.0231581090001],[74.8680328120001,22.0232665610001],[74.8678924000001,22.023387369],[74.8677342130001,22.0239364760001],[74.8674758080001,22.0242268380001],[74.8672520310001,22.024387172],[74.8668648020001,22.024609953],[74.866723531,22.0247218110001],[74.8666614810001,22.02483657],[74.8666885230001,22.024933639],[74.8667515340001,22.024983762],[74.866814547,22.0250338860001],[74.867097926,22.025104754],[74.8671855310001,22.025195346],[74.867188426,22.0252885680001],[74.8671893280001,22.025317645],[74.8671060870001,22.02547911],[74.866868492,22.025741397],[74.866692469,22.0258613450001],[74.866398368,22.0259435300001],[74.8661581540001,22.026162845],[74.8661108760001,22.026370211],[74.8661052260001,22.0267240000001],[74.8661672580001,22.026794083],[74.8662588670001,22.0268349200001],[74.8662973950001,22.02691098],[74.866794037,22.0272331360001],[74.8670155990001,22.0274777380001],[74.8670662740001,22.0275638370001],[74.8671797820001,22.0281310290001],[74.867122248,22.028458173],[74.866894318,22.0288911700001],[74.8670263800001,22.028881749],[74.8670850080001,22.0288857140001],[74.867265515,22.0288979210001],[74.867368168,22.0289153680001],[74.8674835480001,22.0288810970001],[74.8675916450001,22.028838029],[74.8676626120001,22.028823329],[74.8676985990001,22.02880364],[74.867752314,22.028793346],[74.8678224380001,22.0287610300001],[74.8679260390001,22.028788396],[74.8680030740001,22.0288256920001],[74.8682220520001,22.0288979630001],[74.868362668,22.0289340030001],[74.8684855530001,22.028974052],[74.8689605500001,22.0291011310001],[74.8691462780001,22.029163151],[74.8695632640001,22.0292731810001],[74.8699354250001,22.0293938510001],[74.8704085420001,22.029532036],[74.8707366560001,22.029654303],[74.8708729700001,22.029684816],[74.871207224,22.0298005490001],[74.8712648590001,22.029820505],[74.8712959680001,22.029831276],[74.871371077,22.0298634440001],[74.8718858460001,22.030054321],[74.8723298720001,22.030214127],[74.8723989170001,22.0302430080001],[74.8724188460001,22.030251343],[74.872705834,22.0303483390001],[74.8728954740001,22.0304305560001],[74.8732634140001,22.030591596],[74.873285928,22.0306014500001],[74.8733632110001,22.030604926],[74.8733785470001,22.03060687],[74.873528708,22.030618357],[74.8736038980001,22.0306260020001],[74.8736325500001,22.0306409],[74.873724592,22.030653247],[74.8739452520001,22.0306619990001],[74.8741184890001,22.030670032],[74.874220694,22.030682863],[74.874399091,22.030702665],[74.8746086090001,22.030713694],[74.874796357,22.0307093440001],[74.8748453860001,22.030705718],[74.875104584,22.0307027160001],[74.875253603,22.030681229],[74.875290573,22.030671688],[74.8754958790001,22.0306187050001],[74.875580869,22.0306098360001],[74.875764094,22.0306425790001],[74.8759922670001,22.03065579],[74.8761935050001,22.030683298],[74.8763722940001,22.030704853],[74.876630892,22.0307634690001],[74.8770038480001,22.03083537],[74.8770572160001,22.0308566160001],[74.8771884330001,22.0308597420001],[74.8772383450001,22.0308712620001],[74.8774907440001,22.0308617630001],[74.8776028230001,22.0308855050001],[74.8778951630001,22.0309943770001],[74.8779971060001,22.0310395440001],[74.8781052210001,22.031078855],[74.878228043,22.031135826],[74.878336953,22.031165851],[74.878415902,22.0312081820001],[74.878481632,22.031253072],[74.8785859270001,22.03127884],[74.8786612980001,22.03128378],[74.8787780700001,22.0313204190001],[74.8788647800001,22.0313383210001],[74.878928579,22.031371829],[74.8790974090001,22.0313772370001],[74.8791703890001,22.031392356],[74.8793553500001,22.031408049],[74.879457604,22.0314072360001],[74.8796603280001,22.031423863],[74.8799487640001,22.0314215700001],[74.880148503,22.031410039],[74.8801666250001,22.0314070380001],[74.880322473,22.0313812260001],[74.8805241370001,22.0313112700001]]]]}
	</script>
	<script>
		var map = L.map('map',{editable: true}).setView([22.01919,74.8757], 14),
			drawnItems = new L.FeatureGroup().addTo(map);
		var otherEeditActions = [
				LeafletToolbar.EditAction.Popup.Property,
                LeafletToolbar.EditAction.Popup.Edit,
				LeafletToolbar.EditAction.Popup.Delete,
				LeafletToolbar.ToolbarAction.extendOptions({
					toolbarIcon: { 
						className: 'leaflet-color-picker', 
						html: '<span class="fa fa-eyedropper"></span>',
						tooltip : 'Attribute details'						
					},
					subToolbar: new LeafletToolbar({ actions: [
						
						L.ColorPicker.extendOptions({ color: '#db1d0f' }),
						L.ColorPicker.extendOptions({ color: '#025100' }),
						L.ColorPicker.extendOptions({ color: '#ffff00' }),
						L.ColorPicker.extendOptions({ color: '#0000ff'})
					]})
				})
			];
			
		var markerEeditActions = [
				LeafletToolbar.EditAction.Popup.Property,
                LeafletToolbar.EditAction.Popup.Edit,
				LeafletToolbar.EditAction.Popup.Delete,
				LeafletToolbar.ToolbarAction.extendOptions({
					toolbarIcon: { 
						className: 'leaflet-color-picker', 
						html: '<span class="fa fa-eyedropper"></span>',
						tooltip : ''						
					},
					subToolbar: new LeafletToolbar({ actions: [
						L.ColorPicker.extendOptions({ 
							color: '#db1d0f',
							html: '<span class="fa fa-home"></span>',
							markerIcon: 'images/layer1.png'
						}),
						L.ColorPicker.extendOptions({ 
							color: '#025100',
							html: '<span class="fa fa-home"></span>',
							markerIcon: 'images/layer2.png'
						}),
						L.ColorPicker.extendOptions({ 
							color: '#ffff00' ,
							html: '<span class="fa fa-home"></span>',
							markerIcon: 'images/layer3.png'
						}),
						L.ColorPicker.extendOptions({ 
							color: '#0000ff' ,
							html: '<span class="fa fa-home"></span>',
							markerIcon: 'images/marker-icon.png'
						})
					]})
				})
			];

		var baseLayer = L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    minZoom: 0,
                    maxZoom: 18
                });
                baseLayer.addTo(map);
		
		 
		var activeLayer = L.geoJson(jsonData);
		activeLayer.setZIndex(50);
		activeLayer.addTo(map);
		activeLayer.on('click', function (event) {
            L.DomEvent.stopPropagation(event)
            new LeafletToolbar.EditToolbar.Popup(event.latlng).addTo(map, event.layer);
        });
		
		var MyCustomMarker = L.Icon.extend({
			options: {
				shadowUrl: null,
				iconAnchor: new L.Point(12, 12),
				iconSize: new L.Point(24, 24),
				iconUrl: 'images/marker-icon-2x.png'
			}
		});
		
		
		 
		var options = {
			position: 'topleft',
			polygon: {
					shapeOptions: {
						color: 'purple'
					},
					allowIntersection: false,
					drawError: {
						color: 'orange',
						timeout: 1000
					},
					showArea: true,
					metric: false,
					repeatMode: true
				},
       
		};
		
		<!-- var drawControl = new L.Control.Draw({ -->
			<!-- position: 'topright', -->
			<!-- draw: {				 -->
			<!-- }, -->
			<!-- edit: { -->
				<!-- featureGroup: drawnItems -->
			<!-- } -->
		<!-- }); -->
		<!-- map.addControl(drawControl); -->
		new LeafletToolbar.DrawToolbar(options).addTo(map);
		drawnItems.addLayer(activeLayer);
		
		<!-- L.control.browserPrint({ -->
			<!-- title: 'Print/ Export Map to PDF', -->
			<!-- contentSelector: "[leaflet-browser-print-content]", -->
		<!-- }).addTo(map); -->
		
		L.control.browserPrint({
				title: 'Print/ Export Map to PDF',
				documentTitle: "printImage",
				printModes: [
					L.control.browserPrint.mode.auto("Download PNG")
				]
		}).addTo(map);

		map.on("browser-print-start", function(e){
			
		});

		map.on('draw:created', function(evt) {
			var	type = evt.layerType,
				layer = evt.layer;
				drawnItems.addLayer(layer);
			var editActions = otherEeditActions;
			if(type == "marker"){		

				editActions = markerEeditActions;
			}
			layer.on('click', function(event) {
					new LeafletToolbar.EditToolbar.Popup(event.latlng, {
						actions: editActions
					}).addTo(map, layer);
					
				});
		});
		
		 document.getElementById('delete').onclick = function(e) {
            drawnItems.clearLayers();
        }
		
		function download(filename, text) {
		  var element = document.createElement('a');
		  var convertedData = 'text/json;charset=utf-8,' + encodeURIComponent(text);
          
		  element.setAttribute('href', 'data:' + convertedData);
		  element.setAttribute('download', filename);

		  element.style.display = 'none';
		  document.body.appendChild(element);

		  element.click();

		  document.body.removeChild(element);
		}

        document.getElementById('export').onclick = function(e) {
            // Extract GeoJson from featureGroup
            var data = drawnItems.toGeoJSON();
			data = [];
			 drawnItems.eachLayer(function (layer) {
				data.push(layer.toGeoJSON());
				
			 });
			
			download('data.geojson', JSON.stringify(data))
            // Stringify the GeoJson
            var convertedData = 'text/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(data));
            // Create export
            <!-- document.getElementById('export').setAttribute('href', 'data:' + convertedData); -->
            <!-- document.getElementById('export').setAttribute('download','data.geojson'); -->
			
			<!-- var kml = tokml(data); -->
			<!-- var convertedData = 'application/xml;charset=utf-8,' + encodeURIComponent(kml); -->
			<!-- document.getElementById('export').setAttribute('href', 'data:' + convertedData); -->
            <!-- document.getElementById('export').setAttribute('download','data.kml'); -->
        }
		
		window.print = function () {
				return domtoimage
						.toPng(document.querySelector(".grid-print-container"))
						.then(function (dataUrl) {
							var link = document.createElement('a');
							link.download = map.printControl.options.documentTitle || "exportedMap" + '.png';
							link.href = dataUrl;
							link.click();
						});
			};
		
	</script>
</body>
</html>
